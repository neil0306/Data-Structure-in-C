# 还原遍历二叉树
已知遍历的结果, 并且知道属于哪种遍历方式的情况下, 如何恢复整棵二叉树呢?

还原出唯一二叉树的条件:
1. 已知`先序遍历+中序遍历`结果
2. 已知`中序遍历+后序遍历`结果

来看一个二叉树例子:
```txt
         A
       /   \
      B     C
     / \   / 
    D   E F 
           \ 
            G
    先序遍历结果: A B D E C F G
    中序遍历结果: D B E A F G C
    后序遍历结果: D E B G F C A
```

分析还原过程:
```txt
case1:  先序 + 中序
    (A B D E C F G)  以及  (D B E A F G C)

        1. 先看先序遍历, 根据先序遍历规则, 第一个输出一定是"整棵二叉树的根节点", 故A是根节点
        2. 再看中序遍历, 已经知道A是根节点的情况下, A的左侧输出就是左子树 (DBE), 右侧输出就是右子树(FGC)
                  A
                /   \
               DBE  FGC
        3. 再次看到先序遍历, 可以知道此时的左子树先序遍历顺序为(BDE), 右子树的先序遍历为(CFG), 再根据"根-左-右", 那么就有:
            左子树根节点为: B
            右子树根节点为: C
                  A
                /   \
               B     C
              / \    |
             D   E   FG(未知是C的左还是右)
        4. 回到中序遍历, 已经知道C是 (FGC) 这个子树的根节点, 所以 (FG) 一定属于C的左子树部分
                  A
                /   \
               B     C
              / \   /
             D   E (FG)
        5. 对比先序遍历, C的后面是F, 所以C的左子树一定是F
                  A
                /   \
               B     C
              / \   /
             D   E F (G未知)
        6. 回到中序遍历, 我们可以把F看做一颗二叉树的根节点, 此时G在F的右侧, 所以G一定是F的右子树(中序遍历: 左-根-右), 所以得到
                  A
                /   \
               B     C
              / \   / 
              D  E F 
                    \ 
                     G
        
        这个过程可以简单描述为:
            step1: 根据二叉树(也可以是里面的子树)先序遍历和中序遍历的结果, 确定当前子树的根节点;
            step2: 递归调用step1, 寻找根节点左/右子树的根节点(此时传入的先序遍历和中序遍历的结果是对应于左/右子树的结果);


case2: 中序 + 后序
    (D B E A F G C) 和 (D E B G F C A)
        1. 从后序遍历的结果, 直接找到根节点
            因为后序遍历的最后一个节点一定是当前二叉树的根节点
        
        2. 结合中序遍历的结果, 得知 DBE 属于A的左子树部分, FGC 属于A的右子树部分
        
        3. 对于左子树部分, DBE, 从后序遍历得到的顺序为DEB可知, 这三个节点组成的二叉树的根节点一定是B, 同理, 后序遍历的结果是GFC, 故右子树的根节点是C
            知道了左子树的根节点是B, 右子树的根节点是C
        
        4. 此时, 对于DBE这三个节点, 结合中序遍历和后序遍历的结果, 可知D一定是B的左子树节点, 而E一定是B的右子树节点
        
        5. 对于中序遍历的 FGC顺序, 结合C是根节点, 能推出 FG属于C的左子树部分, 且F应该于C直接相连(因为中序遍历为: 左-中-右), 但G是否与C直接相连还不能确定, 只能确定G属于右子树部分; 
        
        6. 观察到后序遍历对应的顺序是 GFC, 那么G就不可能直接连着C (如果G直接与C相连, 此时后序遍历结果应当是 FGC), 故G只能是F的子树部分, 并且此时G还只能是 F 的右子树(如果是F的左子树部分, 那么中序遍历的结果会变成 GFC 而不是 FGC).
```



